name: Test AWS

on:
  workflow_dispatch:
  
jobs:
  Build:
   runs-on: ubuntu-latest
   steps:
     - uses: actions/checkout@v3
     - name: set secret key names
       id: generate_secret_key_names
       run: |
         prefix=$(echo ${{ github.event.inputs.target_environment }})
 #        echo "name=aws_access_key_id_key::${prefix^^}_AWS_TERRAFORM_ACCESS_KEY_ID"
 #        echo "name=aws_secret_access_key_key::${prefix^^}_AWS_TERRAFORM_SECRET_ACCESS_KEY"

     - name: Configure AWS Credentials
       uses: aws-actions/configure-aws-credentials@v1
       with:
         aws-region: eu-central-1
         aws-access-key-id: ${{ secrets[steps.generate_secret_key_names.outputs.aws_access_key_id_key] }}
         aws-secret-access-key: ${{ secrets[steps.generate_secret_key_names.outputs.aws_secret_access_key_key] }}
